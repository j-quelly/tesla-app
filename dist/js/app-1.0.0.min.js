var Configurator=function(){function setConstants(a){var b=a.currency_code;new Injector(document,"base-price").inject(b+a.base_price),new Injector(document,"inspect-prep-price").inject(b+a.inspect_prep_price),new Injector(document,"delivery-price").inject(b+a.personal_delivery_price)}function displayOptions(a){var b=a.currency_code;for(key in a.options)if(a.options.hasOwnProperty(key)){var c=!1,d=!1;if(0===a.options[key].price&&void 0===a.options[key].no_ui&&a.options[key].is_default===!0?(c=!0,d=!0):a.options[key].price>0&&(c=!0),c===!0){var e=document.getElementById("option-template").innerHTML,f=document.createElement("li");f.innerHTML=e,new Injector(f,"name").inject(a.options[key].name),new Injector(f,"price").inject(d?"-":b+a.options[key].price),document.getElementsByClassName("options")[0].appendChild(f)}}}function toggleOption(a){if(a.target!==a.currentTarget&&"checkbox__check"===a.target.className){var b=Number(a.target.parentElement.parentElement.nextSibling.children[0].innerHTML.substr(1));"checkbox checkbox--selected"==a.target.parentElement.className?(a.target.parentElement.className="checkbox",a.target.parentElement.parentElement.parentElement.className="",subtract(b)):(a.target.parentElement.className="checkbox checkbox--selected",a.target.parentElement.parentElement.parentElement.className="active",add(b))}a.stopPropagation()}function total(a){var b=a.currency_code,c=a.base_price+a.inspect_prep_price+a.personal_delivery_price;return new Injector(document,"total-price").inject(b+c),c}function add(a){var b=document.getElementsByClassName("total-price")[0].innerHTML,c=b.charAt(0),b=Number(b.substr(1));b+=a,new Injector(document,"total-price").inject(c+b)}function subtract(a){var b=document.getElementsByClassName("total-price")[0].innerHTML,c=b.charAt(0),b=Number(b.substr(1));b-=a,new Injector(document,"total-price").inject(c+b)}var Configurator=function(){this.data=this.getOptions("/options");var a=document.querySelector(".options");a.addEventListener("click",toggleOption,!1),setConstants(this.data),displayOptions(this.data),total(this.data),new Injector(document,"disclaimer").inject(this.data.disclaimer);var b=document.getElementById("price-toggle");b.onclick=function(a){var c=!0;"Show Prices"===b.innerHTML&&(c=!1),b.innerHTML=c?"Show Prices":"Hide Prices";for(var d=document.getElementsByClassName("price"),e=0;e<d.length;e++)d[e].style.visibility=c?"hidden":"visible"}};return Configurator.prototype=function(){var getOptions=function(arg){var xhr;if(xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xhr.open("GET",arg,!1),xhr.send(),"JSON"in window)var data=JSON.parse(xhr.responseText);else var data=eval(xhr.responseText);return data};return{getOptions:getOptions}}(),Configurator}(),Injector=function(a,b,c){this.template=a,this.attr=b,this.index=c||0};Injector.prototype.inject=function(a){var b=this.template.getElementsByClassName(this.attr)[this.index]||this.template.getElementById(this.attr);return b.innerHTML=a,this};var config=new Configurator;